#!/usr/bin/env bash

VARNISH_STORAGE_MALLOC_DEFAULT_SIZE="200M"
VARNISH_NCSA_LOG_FORMAT_DEFAULT="%%h %%l %%u %%t %%D \"%%r\" %%s %%b %%{Varnish:hitmiss}x \"%%{User-agent}i\"" # Supervisord uses the % character for its own format strings in the config file. You can still use the % character but you must escape it like %%.
VARNISH_TTL_DEFAULT="120"
VARNISH_MIN_THREADS_DEFAULT="5"
VARNISH_MAX_THREADS_DEFAULT="1000"
VARNISH_THREAD_TIMEOUT_DEFAULT="120"
VARNISH_VCL_CONF_DEFAULT="/app/etc/varnish/default.vcl"

export VARNISH_ENABLED=${VARNISH_ENABLED:-"false"}

export VARNISH_STORAGE_MALLOC_SIZE=${VARNISH_STORAGE_MALLOC_CUSTOM_SIZE:-"${VARNISH_STORAGE_MALLOC_DEFAULT_SIZE}"}
export VARNISH_NCSA_LOG_FORMAT=${VARNISH_NCSA_LOG_FORMAT_CUSTOM:-"${VARNISH_NCSA_LOG_FORMAT_DEFAULT}"}
export VARNISH_TTL=${VARNISH_TTL_CUSTOM:-"${VARNISH_TTL_DEFAULT}"}
export VARNISH_MIN_THREADS=${VARNISH_MIN_THREADS_CUSTOM:-"${VARNISH_MIN_THREADS_DEFAULT}"}
export VARNISH_MAX_THREADS=${VARNISH_MAX_THREADS_CUSTOM:-"${VARNISH_MAX_THREADS_DEFAULT}"}
export VARNISH_THREAD_TIMEOUT=${VARNISH_THREAD_TIMEOUT_CUSTOM:-"${VARNISH_THREAD_TIMEOUT_DEFAULT}"}

export VARNISH_VCL_CONF=${VARNISH_VCL_CONF_CUSTOM:-"${VARNISH_VCL_CONF_DEFAULT}"}

true
